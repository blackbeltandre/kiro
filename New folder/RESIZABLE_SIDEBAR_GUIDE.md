# üîß Resizable Sidebar Guide

## Overview
Fitur resizable sidebar memungkinkan pengguna untuk mengubah lebar sidebar kiri dan kanan dengan cara drag-and-drop, mirip dengan VS Code.

---

## ‚ú® Features

### 1. **Drag to Resize**
- Arahkan mouse ke tepi sidebar (kanan untuk left sidebar, kiri untuk right sidebar)
- Handle resize akan muncul dengan warna ungu saat hover
- Klik dan drag untuk mengubah lebar
- Lebar akan tersimpan otomatis di localStorage

### 2. **Visual Feedback**
- **Hover**: Handle berubah warna ungu dengan opacity 30%
- **Active Drag**: Handle berubah warna ungu dengan opacity 60%
- **Indicator Line**: Garis vertikal muncul di tengah handle saat hover
- **Cursor**: Cursor berubah menjadi `col-resize` saat drag

### 3. **Constraints**
- **Minimum Width**: 200px
- **Maximum Width**: 600px
- **Default Left Sidebar**: 256px (w-64)
- **Default Right Sidebar**: 320px (w-80)

### 4. **Persistence**
- Lebar sidebar tersimpan di localStorage
- Otomatis restore saat page reload
- Setiap sidebar memiliki storage terpisah

---

## ‚å®Ô∏è Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `Ctrl/Cmd + B` | Toggle left sidebar visibility |
| `Ctrl/Cmd + Shift + B` | Toggle right sidebar visibility |
| `Ctrl/Cmd + Shift + R` | Reset sidebar widths to default |

---

## üñ±Ô∏è Mouse Interactions

### Drag to Resize
1. Hover over sidebar edge
2. Wait for resize handle to appear (purple highlight)
3. Click and hold
4. Drag left or right
5. Release to set new width

### Double-Click to Reset
- Double-click on resize handle
- Sidebar instantly resets to default width
- Useful for quick reset without keyboard

---

## üé® Visual Design

### Resize Handle
```css
Width: 6px
Position: Absolute (right: -3px or left: -3px)
Cursor: col-resize
Z-index: 100
```

### Colors
- **Hover**: `rgba(139, 92, 246, 0.3)` - Purple 30%
- **Active**: `rgba(139, 92, 246, 0.6)` - Purple 60%
- **Dark Mode Hover**: `rgba(139, 92, 246, 0.5)` - Purple 50%
- **Dark Mode Active**: `rgba(139, 92, 246, 0.8)` - Purple 80%

### Indicator Line
```css
Width: 2px
Height: 40px
Position: Center of handle
Color: Purple (visible on hover)
Border-radius: 2px
```

---

## üîß Technical Implementation

### HTML Structure
```html
<!-- Left Sidebar -->
<div class="left-sidebar w-64 ... relative">
    <!-- Sidebar content -->
    
    <!-- Resize handle (auto-generated by JS) -->
    <div class="resize-handle resize-handle-right"></div>
</div>

<!-- Right Sidebar -->
<aside class="right-sidebar w-80 ... relative">
    <!-- Resize handle (auto-generated by JS) -->
    <div class="resize-handle resize-handle-left"></div>
    
    <!-- Sidebar content -->
</aside>
```

### JavaScript Functions

#### Initialize
```javascript
// Auto-initializes on page load
initResizableSidebars();
```

#### Manual Control
```javascript
// Toggle sidebar visibility
ResizableSidebar.toggle('left');  // or 'right'

// Get current width
const width = ResizableSidebar.getWidth('left');

// Set width programmatically
ResizableSidebar.setWidth('left', 300);

// Reset to default
ResizableSidebar.reset();
```

### Event Flow
```
1. mousedown on handle
   ‚Üì
2. Store initial state (startX, startWidth)
   ‚Üì
3. Add 'resizing' class to body
   ‚Üì
4. mousemove updates width
   ‚Üì
5. Constrain width (MIN to MAX)
   ‚Üì
6. Apply new width to sidebar
   ‚Üì
7. mouseup saves to localStorage
   ‚Üì
8. Remove 'resizing' class
```

---

## üì¶ Files

### `resize-sidebar.js`
Main JavaScript file containing all resize functionality:
- `initResizableSidebars()` - Initialize resize handles
- `handleMouseDown()` - Start resize
- `handleMouseMove()` - Update width during drag
- `handleMouseUp()` - End resize and save
- `resetSidebarWidths()` - Reset to defaults
- `toggleSidebar()` - Show/hide sidebar
- `getSidebarWidth()` - Get current width
- `setSidebarWidth()` - Set width programmatically

### `style.css`
CSS styles for resize handles:
- `.resize-handle` - Base handle styles
- `.resize-handle-right` - Right edge handle
- `.resize-handle-left` - Left edge handle
- `.resize-handle:hover` - Hover effects
- `.resize-handle::before` - Indicator line
- `body.resizing` - Prevent text selection during drag

### `index.html`
HTML structure with required classes:
- `.left-sidebar` - Left sidebar container
- `.right-sidebar` - Right sidebar container
- `relative` - Required for absolute positioned handles

---

## üéØ Usage Examples

### Example 1: Basic Usage
```javascript
// Resize is automatic - just drag the handle!
// No code needed for basic functionality
```

### Example 2: Programmatic Control
```javascript
// Set left sidebar to 400px
ResizableSidebar.setWidth('left', 400);

// Hide right sidebar
ResizableSidebar.toggle('right');

// Get current left sidebar width
const leftWidth = ResizableSidebar.getWidth('left');
console.log(`Left sidebar: ${leftWidth}px`);
```

### Example 3: Reset All
```javascript
// Reset both sidebars to default widths
ResizableSidebar.reset();
```

### Example 4: Custom Integration
```javascript
// Listen for resize events (custom implementation)
const leftSidebar = document.querySelector('.left-sidebar');
const observer = new ResizeObserver(entries => {
    for (let entry of entries) {
        console.log('Sidebar resized:', entry.contentRect.width);
    }
});
observer.observe(leftSidebar);
```

---

## üîç Troubleshooting

### Handle Not Appearing
**Problem**: Resize handle tidak muncul
**Solution**: 
- Pastikan sidebar memiliki class `.left-sidebar` atau `.right-sidebar`
- Pastikan sidebar memiliki `position: relative`
- Check console untuk error messages

### Width Not Saving
**Problem**: Lebar tidak tersimpan setelah reload
**Solution**:
- Check localStorage di browser DevTools
- Pastikan browser mengizinkan localStorage
- Clear localStorage dan coba lagi: `localStorage.clear()`

### Drag Not Working
**Problem**: Tidak bisa drag handle
**Solution**:
- Pastikan `resize-sidebar.js` sudah di-load
- Check console untuk JavaScript errors
- Pastikan tidak ada CSS yang override `cursor: col-resize`

### Handle Too Sensitive
**Problem**: Handle terlalu mudah ter-trigger
**Solution**:
- Adjust `width` di `.resize-handle` (default: 6px)
- Adjust `right: -3px` atau `left: -3px` positioning

---

## üé® Customization

### Change Handle Width
```css
.resize-handle {
    width: 8px; /* Default: 6px */
}
```

### Change Handle Color
```css
.resize-handle:hover {
    background-color: rgba(34, 197, 94, 0.3); /* Green instead of purple */
}
```

### Change Min/Max Width
```javascript
// In resize-sidebar.js
const MIN_SIDEBAR_WIDTH = 150;  // Default: 200
const MAX_SIDEBAR_WIDTH = 800;  // Default: 600
```

### Change Indicator Line
```css
.resize-handle::before {
    width: 3px;    /* Default: 2px */
    height: 60px;  /* Default: 40px */
    background-color: rgba(139, 92, 246, 1); /* Always visible */
}
```

### Disable Double-Click Reset
```javascript
// Comment out or remove this line in resize-sidebar.js
// initDoubleClickReset();
```

---

## üöÄ Performance

### Optimizations
- Uses `requestAnimationFrame` implicitly through browser
- Minimal DOM manipulation during drag
- Efficient event delegation
- localStorage writes only on mouseup (not during drag)

### Best Practices
- Avoid heavy computations in resize event handlers
- Use CSS transitions sparingly during resize
- Debounce any custom resize listeners
- Test with large content in sidebars

---

## üåê Browser Compatibility

| Browser | Version | Support |
|---------|---------|---------|
| Chrome | 90+ | ‚úÖ Full |
| Firefox | 88+ | ‚úÖ Full |
| Safari | 14+ | ‚úÖ Full |
| Edge | 90+ | ‚úÖ Full |
| Opera | 76+ | ‚úÖ Full |

### Required Features
- CSS `position: absolute`
- JavaScript `addEventListener`
- localStorage API
- CSS `cursor: col-resize`
- CSS `user-select: none`

---

## üì± Mobile Considerations

### Touch Support (Future Enhancement)
Currently optimized for mouse/trackpad. For touch support:

```javascript
// Add touch event listeners
handle.addEventListener('touchstart', handleTouchStart);
document.addEventListener('touchmove', handleTouchMove);
document.addEventListener('touchend', handleTouchEnd);
```

### Responsive Behavior
```css
@media (max-width: 768px) {
    .resize-handle {
        width: 12px; /* Larger for touch */
    }
}
```

---

## üîê Security

### localStorage Safety
- Only stores numeric width values
- No sensitive data stored
- User-specific (per browser/device)
- Can be cleared anytime

### XSS Prevention
- No `innerHTML` usage
- All DOM manipulation via `createElement`
- No eval() or dynamic code execution

---

## üìä Analytics Integration

### Track Resize Events
```javascript
// Add to handleMouseUp() function
window.dataLayer = window.dataLayer || [];
window.dataLayer.push({
    event: 'sidebar_resized',
    sidebar: sidebarClass,
    width: finalWidth
});
```

### Track Keyboard Shortcuts
```javascript
// Add to keyboard event handlers
console.log('Keyboard shortcut used:', e.key);
```

---

## üéì Learning Resources

### Related Concepts
- **Flexbox Layout**: Understanding flex-grow and flex-shrink
- **Event Delegation**: Efficient event handling
- **localStorage API**: Client-side data persistence
- **CSS Positioning**: Absolute vs Relative
- **Mouse Events**: mousedown, mousemove, mouseup

### Similar Implementations
- VS Code sidebar resize
- Chrome DevTools panel resize
- Figma layers panel resize
- Notion sidebar resize

---

## ‚úÖ Testing Checklist

- [ ] Drag left sidebar right edge
- [ ] Drag right sidebar left edge
- [ ] Test minimum width constraint (200px)
- [ ] Test maximum width constraint (600px)
- [ ] Double-click handle to reset
- [ ] Keyboard shortcut: Ctrl+B (toggle left)
- [ ] Keyboard shortcut: Ctrl+Shift+B (toggle right)
- [ ] Keyboard shortcut: Ctrl+Shift+R (reset)
- [ ] Reload page - width persists
- [ ] Test in dark mode
- [ ] Test in light mode
- [ ] Test with long content in sidebar
- [ ] Test with empty sidebar
- [ ] Test rapid dragging
- [ ] Test edge cases (very fast drag)

---

## üêõ Known Issues

### None Currently
All features working as expected. Report issues if found.

---

## üîÆ Future Enhancements

1. **Touch Support** - Add mobile/tablet touch events
2. **Snap Points** - Snap to predefined widths (200px, 300px, 400px)
3. **Collapse Animation** - Smooth collapse to icon-only mode
4. **Resize Preview** - Show width value during drag
5. **Custom Themes** - Different handle colors per theme
6. **Accessibility** - Keyboard-only resize (arrow keys)
7. **Multi-Panel** - Support for more than 2 sidebars
8. **Resize Limits** - Per-sidebar custom min/max
9. **Smooth Transitions** - Optional smooth width transitions
10. **Resize History** - Undo/redo width changes

---

**Resizable Sidebar Ready! üîß**

Drag the purple handles on sidebar edges to resize. Double-click to reset. Use keyboard shortcuts for quick control.
